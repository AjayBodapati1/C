package com.example.desis_to_csv;

import com.example.desis_to_csv.model.FileMetadata;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RestController;

@RestController
public class S3FileMetadataController {

    @Autowired
    private S3FileMetadataService service;

    @GetMapping("/s3/store-metadata")
    public FileMetadata storeS3FileMetadata() {
        return service.fetchAndStoreMetadata();
    }
}








package com.example.desis_to_csv.model;

import org.springframework.data.annotation.Id;
import org.springframework.data.mongodb.core.mapping.Document;

@Document(collection = "file_metadata")
public class FileMetadata {

    @Id
    private String id;

    private String fileName;
    private String fileType;
    private String sourceSystem;
    private String uploadedBy;
    private String timestamp;
    private String storagePath;

    public FileMetadata() {}

    public FileMetadata(String fileName, String fileType, String sourceSystem,
                        String uploadedBy, String timestamp, String storagePath) {
        this.fileName = fileName;
        this.fileType = fileType;
        this.sourceSystem = sourceSystem;
        this.uploadedBy = uploadedBy;
        this.timestamp = timestamp;
        this.storagePath = storagePath;
    }

    // Getters and Setters
    public String getId() { return id; }
    public void setId(String id) { this.id = id; }

    public String getFileName() { return fileName; }
    public void setFileName(String fileName) { this.fileName = fileName; }

    public String getFileType() { return fileType; }
    public void setFileType(String fileType) { this.fileType = fileType; }

    public String getSourceSystem() { return sourceSystem; }
    public void setSourceSystem(String sourceSystem) { this.sourceSystem = sourceSystem; }

    public String getUploadedBy() { return uploadedBy; }
    public void setUploadedBy(String uploadedBy) { this.uploadedBy = uploadedBy; }

    public String getTimestamp() { return timestamp; }
    public void setTimestamp(String timestamp) { this.timestamp = timestamp; }

    public String getStoragePath() { return storagePath; }
    public void setStoragePath(String storagePath) { this.storagePath = storagePath; }
}




package com.example.desis_to_csv.repository;

import com.example.desis_to_csv.model.FileMetadata;
import org.springframework.data.mongodb.repository.MongoRepository;

public interface FileMetadataRepository extends MongoRepository<FileMetadata, String> {
}